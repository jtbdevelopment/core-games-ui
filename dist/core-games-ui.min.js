!function(e){e.module("coreGamesUi.config",[]).value("coreGamesUi.config",{debug:!0}),e.module("coreGamesUi.directives",[]),e.module("coreGamesUi.filters",[]),e.module("coreGamesUi.services",[]),e.module("coreGamesUi",["coreGamesUi.config","coreGamesUi.directives","coreGamesUi.filters","coreGamesUi.services","ngResource","ngCookies","ngSanitize"])}(angular),angular.module("coreGamesUi.services").factory("jtbFacebook",["$http","$location","$q",function(e,n,o){function i(){var i=o.defer();return r?(i.resolve(),i.promise):(e.get("/api/social/apis",{cache:!0}).success(function(e){t=e.facebookAppId,s=e.facebookPermissions,window.fbAsyncInit=function(){FB.init({appId:t,xfbml:!0,version:"v2.1"}),i.resolve(s)},function(e,n,o){function t(){r=!1,i.reject()}var s,c=e.getElementsByTagName(n)[0];e.getElementById(o)||(s=e.createElement(n),s.id=o,s.src="//connect.facebook.net/en_US/sdk.js",s.onerror=t,c.parentNode.insertBefore(s,c))}(document,"script","facebook-jssdk"),r=!0}).error(function(){n.path("/error"),i.reject()}),i.promise)}var r=!1,t="",s="";return{canAutoSignIn:function(){var e=o.defer();return i().then(function(n){FB.getLoginStatus(function(o){e.resolve({auto:angular.isDefined(o)&&angular.isDefined(o.status)&&"connected"===o.status,permissions:n})})},function(){e.reject()}),e.promise},inviteFriends:function(e){i().then(function(){var n=!0,o="";angular.forEach(e,function(e){n?n=!1:o+=", ",o+=e}),FB.ui({method:"apprequests",message:"Come play Twisted Hangman with me!",to:o},function(e){console.info(JSON.stringify(e))})},function(){})},playerAndFBMatch:function(e){var n=o.defer();return i().then(function(){"facebook"===e.source?FB.getLoginStatus(function(o){"connected"===o.status?n.resolve(o.authResponse.userID===e.sourceId):n.resolve(!1)}):n.resolve(!1)}),n.promise}}}]);